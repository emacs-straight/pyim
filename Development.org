#+TITLE: PYIM 设计开发手册
#+AUTHOR: Feng Shu

* 整体架构
#+begin_example
+----------------------+------------------------------------------------------------------+--------------------------+
| Emacs IM 接口        | pyim-input-method, pyim-activate, pyim-deactivate                |                          |
| PYIM 实现层:         | pyim-exit-from-minibuffer, pyim-mode-map                         |                          |
|                      |                                                                  |                          |
+----------------------+------------------------------------------------------------------|                          |
| PYIM 用户命令定义层：| Pyim 用户命令，Entered 用户命令                                  |                          |
|                      | Cregexp 用户命令，Cstring 用户命令                               |                          |
|                      | Dict 管理命令，标点用户命令，Pymap 管理命令                      |         Scheme           |
+----------------------+-----------------+------------------------------------------------+                          |
| PYIM 流程组件层：    | Process         | PYIM 视图组件层： Page, Preview, Indicator     |     Assistant-scheme     |
+----------------------+-----------------+------------------------------------------------|                          |
| PYIM 实体组件层：    | Entered, Imobjs, Codes, Candidates, Outcome, Magic-convert,      |         Common           |
|                      | Punctuations, Cregexp, Cstring, Probe,                           |                          |
|                      | Autoselector, Pinyin                                             |                          |
+----------------------+-----------------------------------------+------------------------+                          |
| PYIM 持久化层        | Dcache (接口), Dregcache (实现), Dhashcache (实现)               |                          |
+----------------------+------------------------------------------------------------------+                          |
| 词库文件层：         | Dict, Pymap                                                      |                          |
+----------------------+------------------------------------------------------------------+--------------------------+
#+end_example

