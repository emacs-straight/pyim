#+TITLE: PYIM 设计开发手册
#+AUTHOR: Feng Shu

* 整体架构
#+begin_example
+------------------+------------------------------------------------------------------+--------------------+
| Emacs IM 接口    | pyim-input-method, pyim-activate, pyim-deactivate                |                    |
| PYIM 实现层:     | pyim-exit-from-minibuffer, pyim-mode-map                         |                    |
|                  |                                                                  |                    |
+------------------+----------------------------+-------------------------------------|                    |
| PYIM 用户命令层：                             | PYIM 视图层：                       |                    |
| ---------------                               | ------------                        |                    |
| Pyim 用户命令，Entered 用户命令               | Page                                |                    |
| Cregexp 用户命令，Cstring 用户命令            | Preview                             |                    |
| Dict 管理命令，标点用户命令，Pymap 管理命令   | Indicator                           |      Scheme        |
|                                               |                                     |                    |
+------------------+----------------------------+-------------------------------------+                    |
| PYIM 用例层：    | Process                                                          |  Assistant-scheme  |
+------------------+------------------------------------------------------------------|                    |
| PYIM 实体层：    | Entered, Imobjs, Codes, Candidates, Outcome,                     |      Common        |
|                  | Punctuations, Cregexp, Cstring, Probe,                           |                    |
|                  | Autoselector, Pinyin,                                            |                    |
|                  +------------------------------------------------------------------+                    |
|                  | Dcache (接口)                                                    |                    |
+------------------+-----------------------------------------+------------------------+                    |
| PYIM 持久化层    | Dregcache (实现), Dhashcache (实现)                              |                    |
+------------------+------------------------------------------------------------------+                    |
| 词库文件层：     | Dict, Pymap                                                      |                    |
+------------------+------------------------------------------------------------------+--------------------+
#+end_example

