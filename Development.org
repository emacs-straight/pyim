#+TITLE: PYIM 设计开发手册
#+AUTHOR: Feng Shu

* 整体架构
#+begin_example
+---------------------------------------------------------------------------------------------+
|     Emacs IM 接口 PYIM 实现层：                                                             |
|     -------------------------                                                               |
|     pyim-input-method, pyim-activate, pyim-deactivate                                       |
|     pyim-exit-from-minibuffer, pyim-mode-map                                                |
|     +---------------------------------------------------------------------------------+     |
|     | PYIM 用户命令层:                                                  PYIM 视图层： |     |
|     | ----------------                                                  ------------  |     |
|     | Pyim 用户命令, Entered 用户命令                                   Page          |     |
|     | Cregexp 用户命令，Cstring 用户命令                                Preview       |     |
|     | Dict 管理命令，标点用户命令，Pymap 管理命令                       Indicator     |     |
|     |                                                                                 |     |
|     |                 +---------------------------------------------+                 |     |
|     |                 | PYIM 用例层： Process                       |                 |     |
|     |                 |                                             |                 |     |
|     |                 |      +-------------------------------+      |                 |     |
|     |                 |      | PYIM 实体层：                 |      |                 |     |
|     |                 |      | -----------                   |      |                 |     |
|     |                 |      | Entered, Imobjs, Codes,       |      |                 |     |
|     |                 |      | Candidates, Outcome,          |      |                 |     |
|     |                 |      | Punctuations, Cregexp,        |      |                 |     |
|     |                 |      | Cstring, Probe,               |      |                 |     |
|     |                 |      | Autoselector, Pinyin,         |      |                 |     |
|     |                 |      | Scheme, Assistant-scheme,     |      |                 |     |
|     |                 |      |-------------------------------+      |                 |     |
|     |                 |      | Dcache                        |      |                 |     |
|     |                 |      | Common                        |      |                 |     |
|     |                 |      | Pymap                         |      |                 |     |
|     |                 |      +-------------------------------+      |                 |     |
|     |                 |                                             |                 |     |
|     |                 |                                             |                 |     |
|     |                 +---------------------------------------------+                 |     |
|     |                                                                                 |     |
|     |  PYIM 持久化层:                                                                 |     |
|     |  --------------                                                                 |     |
|     |  Dregcache                                                                      |     |
|     |  Dhashcache                                                                     |     |
|     |  Dict                                                                           |     |
|     +---------------------------------------------------------------------------------+     |
|                                                                                             |
+---------------------------------------------------------------------------------------------+
#+end_example
